<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Installing and Loading R Packages for Reproducible Workflows • Require</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Installing and Loading R Packages for Reproducible Workflows">
<meta property="og:description" content="A single key function, Require that makes rerun-tolerant
    versions of install.packages and `require` for CRAN packages, packages
    no longer on CRAN (i.e., archived), specific versions of packages, 
    and GitHub packages. This approach is developed to create reproducible 
    workflows that are flexible and fast enough to use while in development stages,
    while able to build snapshots once a stable package collection is found. 
    As with other functions in a reproducible workflow, this package 
    emphasizes functions that return the same result whether it is 
    the first or subsequent times running the function, with subsequent times being
    sufficiently fast that they can be run every time without undue waiting burden on 
    the user or developer.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Require</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PredictiveEcology/Require/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="require">Require<a class="anchor" aria-label="anchor" href="#require"></a>
</h1></div>
<!-- badges start -->

<p>A simple package for reproducible package management in R. This is different than other approaches to package management such as <code>pak</code>, <code>packrat</code>, <code>checkpoint</code>, and <code>renv</code>, by including all-in-one management for packages in R focused around a single function, <code>Require</code>. We outline differences with these packages below.</p>
</div>
<div class="section level1">
<h1 id="objectives">Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h1>
<p>Some packages, including those in our PredictiveEcology repository, have <em>many</em> package dependencies. Some of them are on CRAN, but some are still in development and so are hosted elsewhere. Mixing many package dependencies that are constantly evolving creates challenges with standard R package management. For example, what is the best way to move analyses from one machine to another, or set up a series of High Performance Compute nodes? How should we use functions like <code>install.packages</code> in a reproducible workflow that are clearly intended to be used once or very few times? How do we deal with many packages on GitHub that have many common dependencies? How do we deal with packages that have dependencies that are no longer on CRAN (“they have been archived”)? How do we replicate an analysis 6 months from now when some packages have changed, and their dependencies have changed? Finally, how do we do all this for many concurrent projects without installing hundreds of packages in a new directory for every project?</p>
</div>
<div class="section level1">
<h1 id="require-1">
<code>Require</code><a class="anchor" aria-label="anchor" href="#require-1"></a>
</h1>
<p><code>Require</code> uses a “rerun-tolerant” function, <code>Require</code>. “rerun-tolerant” means that the results from running this function (the output) will be identical each time, even when the conditions when run are different. This means that if one or more packages is not installed prior to running the function, then the function will determine which are not installed, install those. If no packages are missing, then it will not install anything. This function uses RAM caching, so the first time it is run in a new R session will be slower than subsequent times in which cached copies of e.g., the package dependency tree, can be used. “rerun-tolerant” is a requirement for a robust reproducible workflow; for every “manual” break in code (i.e., a user runs a bit of code, then skips a few lines, then runs more etc.) provides the potential for sections of code to become stale without the user being aware.</p>
<p><code>Require</code> also will call <code>require</code> (lower case <code>r</code>) on all the named packages, if the <code>require = TRUE</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># These lines</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">}</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span><span class="op">)</span><span class="op">}</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/lme4/lme4/" class="external-link">"lme4"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"lme4"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/lme4/lme4/" class="external-link">"lme4"</a></span><span class="op">)</span><span class="op">}</span>

<span class="co"># become</span>
<span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="other-packages-that-also-install-packages">Other packages that also install packages<a class="anchor" aria-label="anchor" href="#other-packages-that-also-install-packages"></a>
</h1>
<p>The below descriptions are necessarily simple; please go see each package for more details. Below, we highlight some key features that are relevant to this README.</p>
<div class="section level2">
<h2 id="pak">
<code>pak</code><a class="anchor" aria-label="anchor" href="#pak"></a>
</h2>
<p><code>pak</code> focuses on fast installations of <em>current</em> versions of packages on CRAN-like packages and GitHub.com and other similar code-sharing pages. This works well if the objective is to keep current. It is fast.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># These lines</span>
<span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="http://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># become</span>
<span class="fu">Require</span><span class="fu">::</span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span><span class="op">)</span>, require <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="renv">
<code>renv</code><a class="anchor" aria-label="anchor" href="#renv"></a>
</h2>
<p><code>renv</code> is a tool to help with a more static package installation process. While it can handle packages that are updated manually by an individual, the key strength is around keeping track of the versions that exist in a project. <code>renv</code> is not intended to expose the code used to install packages. This makes the managing of packages separate from the script that is/are used in the project.</p>
</div>
<div class="section level2">
<h2 id="packrat">
<code>packrat</code><a class="anchor" aria-label="anchor" href="#packrat"></a>
</h2>
<p>This is mostly the predecessor to <code>renv</code>. <code>renv</code> can do everything <code>packrat</code> can do, but better.</p>
</div>
<div class="section level2">
<h2 id="checkpoint">
<code>checkpoint</code><a class="anchor" aria-label="anchor" href="#checkpoint"></a>
</h2>
<p>This approach takes a date as an input and will install all the packages a user wants, from that date. This uses the MRAN servers hosted by Microsoft.</p>
</div>
<div class="section level2">
<h2 id="require-2">
<code>Require</code><a class="anchor" aria-label="anchor" href="#require-2"></a>
</h2>
<div class="section level3">
<h3 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h3>
<ul>
<li>reproducible workflows – rerun-tolerant</li>
<li>fast (see one example of timings below)</li>
<li>packages can be on CRAN, CRAN-alikes, or GitHub.com</li>
<li>uses <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> like base-R</li>
<li>true <em>stand alone</em>, not the folder-based approach used in <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>. For example, if a user e.g., on Windows Home has packages installed in the system folder because admin privileges allows it, setting <code>standAlone = TRUE</code> will ignore those packages and only use the ones in <code>.libPaths()[1]</code>
</li>
<li>can use hierarchical library paths</li>
<li>can take snapshots, keeping version information for reinstallation on another machine/system. See below and <code><a href="reference/pkgSnapshot.html">?pkgSnapshot</a></code>
</li>
<li>can use both binary or source installs; yet overrides a user request where this is likely inappropriate, e.g., <code>Rcpp</code> often fails when installed on Linux from a binary package manager. Spatial packages are similar.</li>
<li>uses a local cache of packages (defaults outside the project, but inside the user’s home) so multiple projects can install packages quickly without re-downloading from the cloud repositories (see <code>RequireOptions()$Require.RPackageCache</code>)</li>
<li>puts all package installing into a compact form, so it can be placed within the project source code, enhancing reproducibility and transparency</li>
<li>by default, runs <code>require</code> on every package, in order, as supplied to <code>packages</code> argument</li>
</ul>
</div>
</div>
</div>
<div class="section level1">
<h1 id="installing">Installing<a class="anchor" aria-label="anchor" href="#installing"></a>
</h1>
<div class="section level2">
<h2 id="news">News<a class="anchor" aria-label="anchor" href="#news"></a>
</h2>
<p>See updates from latest <a href="https://cran.r-project.org/package=Require" class="external-link">CRAN</a> and <a href="https://github.com/PredictiveEcology/Require/blob/development/NEWS.md" class="external-link">development</a> versions.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="current-release">Current release<a class="anchor" aria-label="anchor" href="#current-release"></a>
</h3>
<p><a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg?branch=master" alt="R build status"></a> <a href="https://app.codecov.io/gh/PredictiveEcology/Require" class="external-link"><img src="https://codecov.io/gh/PredictiveEcology/Require/branch/master/graph/badge.svg" alt="codecov"></a></p>
<p><strong>Install from CRAN:</strong></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span></code></pre></div>
<p><strong>Install from GitHub:</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"PredictiveEcology/Require"</span><span class="op">)</span> </code></pre></div>
</div>
<div class="section level3">
<h3 id="development-version">Development version<a class="anchor" aria-label="anchor" href="#development-version"></a>
</h3>
<p><a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg?branch=development" alt="R build status"></a> <a href="https://app.codecov.io/gh/PredictiveEcology/Require" class="external-link"><img src="https://codecov.io/gh/PredictiveEcology/Require/branch/development/graph/badge.svg" alt="codecov"></a></p>
<p><strong>Install from GitHub:</strong></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"PredictiveEcology/Require@development"</span><span class="op">)</span> </code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p><code>Require</code> is a wrapper around functions <code>utils::install packages</code> and one of the main function to load packages, <code><a href="https://rdrr.io/r/base/library.html" class="external-link">base::require</a></code>. Like <code>install.packages</code>, it is vectorized on package names.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://Require.predictiveecology.org" class="external-link">"Require"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Require"</span><span class="op">)</span><span class="op">}</span> <span class="co"># sadly, Require can't install itself, so must comment this line</span>
<span class="fu">Require</span><span class="fu">::</span><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"data.table"</span><span class="op">)</span>

<span class="co"># With version numbering, this will install data.table, and also check that the installed </span>
<span class="co">#    version is greater than 1.12.8; if not, then it will install a newer version</span>
<span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"data.table (&gt;=1.12.8)"</span><span class="op">)</span>

<span class="co"># vectorized, mixed github and CRAN, mixed version number and not</span>
<span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table (&gt;=1.12.8)"</span>, <span class="st">"PredictiveEcology/quickPlot"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="timings">Timings<a class="anchor" aria-label="anchor" href="#timings"></a>
</h2>
<p><code>Require</code> has been optimized for speed. While <code>pak</code> is fast, in many cases <code>Require</code> is faster. Below, in cases where all packages are already installed, <code>Require</code> is 3x faster.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First time run, before cache exists</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(pak<span class="sc">::</span><span class="fu">pkg_install</span>(<span class="fu">c</span>(<span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span>)))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>✔ Loading metadata database ... done</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>ℹ No downloads are needed</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>✔ <span class="dv">3</span> pkgs <span class="sc">+</span> <span class="dv">24</span> deps<span class="sc">:</span> kept <span class="dv">25</span> [<span class="fl">3.5</span>s]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fl">1.083</span>   <span class="fl">0.029</span>   <span class="fl">3.658</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(Require<span class="sc">::</span><span class="fu">Require</span>(<span class="fu">c</span>(<span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span>), <span class="at">require =</span> <span class="cn">FALSE</span>))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.832</span>   <span class="fl">0.001</span>   <span class="fl">1.363</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Second time run, using cache</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(pak<span class="sc">::</span><span class="fu">pkg_install</span>(<span class="fu">c</span>(<span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span>)))</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>ℹ No downloads are needed</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>✔ <span class="dv">3</span> pkgs <span class="sc">+</span> <span class="dv">24</span> deps<span class="sc">:</span> kept <span class="dv">25</span> [946ms]</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.034</span>   <span class="fl">0.001</span>   <span class="fl">0.961</span> </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">system.time</span>(Require<span class="sc">::</span><span class="fu">Require</span>(<span class="fu">c</span>(<span class="st">"data.table"</span>, <span class="st">"dplyr"</span>, <span class="st">"lme4"</span>), <span class="at">require =</span> <span class="cn">FALSE</span>))</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>   user  system elapsed </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fl">0.099</span>   <span class="fl">0.000</span>   <span class="fl">0.297</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="other-features">Other features<a class="anchor" aria-label="anchor" href="#other-features"></a>
</h2>
<div class="section level3">
<h3 id="keeping-it-all-isolated">Keeping it all isolated<a class="anchor" aria-label="anchor" href="#keeping-it-all-isolated"></a>
</h3>
<p>Require can make install to and use from a single directory, so a project can be fully isolated (unlike <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, which will always see packages in the R_HOME directory)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org" class="external-link">Require</a></span><span class="op">)</span>
<span class="va">projectPackages</span> <span class="op">=</span> <span class="st">"projectPackages"</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projectPackages</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="va">projectPackages</span><span class="op">)</span>
<span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"remotes (&gt;=2.4.0)"</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Or we can use a hybrid of our main, “personal” library and a project specific one for “extra” packages:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"fpCompare (&gt;=0.2.0)"</span>, require <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># don't load it, just install</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installing-old-package-versions">Installing old package versions<a class="anchor" aria-label="anchor" href="#installing-old-package-versions"></a>
</h3>
<p>In the same way as above, we can specify maximum or exact package versions. <code>Require</code> will retrieve these on CRAN archives.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="st">"fpCompare (&lt;=0.1.0)"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="managing-a-project">Managing a project<a class="anchor" aria-label="anchor" href="#managing-a-project"></a>
</h3>
<p>Because it is vectorized, there can be a long list of packages at the top of a project file, with various sources and version specifications.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.table (==1.12.8)"</span>, <span class="st">"dplyr"</span>, <span class="st">"reproducible"</span>, 
          <span class="st">"PredictiveEcology/SpaDES@development"</span>, <span class="st">"raster (&gt;=3.1.5)"</span><span class="op">)</span>, 
        standAlone <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="taking-a-snapshot">Taking a snapshot<a class="anchor" aria-label="anchor" href="#taking-a-snapshot"></a>
</h3>
<p>When a system is set up with the correct packages and versions, we can take a snapshot and give that file to another person or machine:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org" class="external-link">Require</a></span><span class="op">)</span>
<span class="fu"><a href="reference/pkgSnapshot.html">pkgSnapshot</a></span><span class="op">(</span><span class="st">"mySnapshot.txt"</span>, standAlone <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># to get only the project specific ones</span>

<span class="co">## move to a new machine, say</span>
<span class="fu"><a href="reference/Require.html">Require</a></span><span class="op">(</span>packageVersionFile <span class="op">=</span> <span class="st">"mySnapshot.txt"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-local-package-cache">Using local package cache<a class="anchor" aria-label="anchor" href="#using-local-package-cache"></a>
</h3>
<p>When installing on many machines on a network, having a local cache can speed up installations. By default, this is activated, with a message upon package load as to where the cache folder is. Setting <code>options("Require.RPackageCache" = "somePath")</code> will move it to that location; or setting <code>options("Require.RPackageCache" = NULL)</code> will turn caching off. By default, binaries will be saved on Windows. Also by default, binaries will be <em>built</em> on the fly on *nix systems and this binary will be cached for even faster installs later.</p>
</div>
</div>
</div>
<div class="section level1">
<h1 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h1>
<p><code>Require</code> package offers a simple, lightweight, package focused around a single function that is “rerun-tolerant”, i.e., it will take sufficiently little time to execute that it can be left in your script so it is run every time, even for ongoing work. The package has one dependencies (<code>data.table</code>) and so can be used to install packages without interfering with itself.</p>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>Please see <code>CONTRIBUTING.md</code> for information on how to contribute to this project.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=Require" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/PredictiveEcology/Require/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/PredictiveEcology/Require/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing Require</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Eliot J B McIntire <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6914-8316" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=Require" class="external-link"><img src="https://www.r-pkg.org/badges/version/Require" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=Require" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/Require" alt="CRAN Downloads"></a></li>
<li><a href="https://github.com/PredictiveEcology/Require/actions" class="external-link"><img src="https://github.com/PredictiveEcology/Require/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://gitter.im/PredictiveEcology/Require?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" class="external-link"><img src="https://badges.gitter.im/PredictiveEcology/Require.svg" alt="Join the chat at https://gitter.im/PredictiveEcology/Require"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
