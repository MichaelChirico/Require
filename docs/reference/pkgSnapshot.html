<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Take a snapshot of all the packages and version numbers — pkgSnapshot • Require</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Take a snapshot of all the packages and version numbers — pkgSnapshot"><meta property="og:description" content="This can be used later by installVersions to install or re-install the correct versions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Require</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/Require/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Take a snapshot of all the packages and version numbers</h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/Require/blob/HEAD/R/pkgSnapshot.R" class="external-link"><code>R/pkgSnapshot.R</code></a></small>
    <div class="hidden name"><code>pkgSnapshot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This can be used later by <code>installVersions</code> to install or re-install the correct versions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">pkgSnapshot</span><span class="op">(</span>
  packageVersionFile <span class="op">=</span> <span class="st">"packageVersions.txt"</span>,
  <span class="va">libPaths</span>,
  standAlone <span class="op">=</span> <span class="cn">FALSE</span>,
  purge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.purge"</span>, <span class="cn">FALSE</span><span class="op">)</span>,
  exact <span class="op">=</span> <span class="cn">TRUE</span>,
  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"Require.verbose"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>packageVersionFile</dt>
<dd><p>A filename to save the packages and their currently
installed version numbers. Defaults to <code>"packageVersions.txt"</code>.
If this is specified to be <code>NULL</code>, the function will return the exact
<code>Require</code> call needed to install all the packages at their current
versions. This can be useful to add to a script to allow for reproducibility of
a script.</p></dd>


<dt>libPaths</dt>
<dd><p>The path to the local library where packages are installed.
Defaults to the <code>.libPaths()[1]</code>.</p></dd>


<dt>standAlone</dt>
<dd><p>Logical. If <code>TRUE</code>, all packages will be installed to and loaded from
the <code>libPaths</code> only. NOTE: If <code>TRUE</code>, THIS WILL CHANGE THE USER'S <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, similar
to e.g., the <code>checkpoint</code> package.
If <code>FALSE</code>, then <code>libPath</code> will be prepended to <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> during the <code>Require</code> call,
resulting in shared packages, i.e., it will include the user's default package folder(s).
This can be create dramatically faster installs if the user has a substantial number of
the packages already in their personal library.
Default <code>FALSE</code> to minimize package installing.</p></dd>


<dt>purge</dt>
<dd><p>Logical. Should all caches be purged?
Default is <code>getOption("Require.purge", FALSE)</code>.
There is a lot of internal caching of results throughout the <code>Require</code> package.
These help with speed and reduce calls to internet sources.
However, sometimes these caches must be purged.
The cached values are renewed when found to be too old, with the age limit.
This maximum age can be set in seconds with the environment variable
<code>R_AVAILABLE_PACKAGES_CACHE_CONTROL_MAX_AGE</code>, or if unset,
defaults to 3600  (one hour -- see <code><a href="https://rdrr.io/r/utils/available.packages.html" class="external-link">utils::available.packages</a></code>).</p>
<p>Internally, there are calls to <code>available.packages</code>.</p></dd>


<dt>exact</dt>
<dd><p>Logical. If <code>TRUE</code>, the default, then for GitHub packages, it
will install the exact SHA, rather than the head of the <code>account/repo@branch</code>. For
CRAN packages, it will install the exact version. If <code>FALSE</code>, then GitHub
packages will identify their branch if that had been specified upon installation,
not a SHA. If the package had been installed with reference to a SHA, then it
will return the SHA as it does not know what branch it came from.
Similarly, CRAN packages will report their version and specify with a <code>&gt;=</code>,
allowing a subsequent user
to install with a minimum version number, as opposed to an exact version number.</p></dd>


<dt>verbose</dt>
<dd><p>Numeric or logical indicating how verbose should the function be.
If -1 or less, then as little verbosity as possible.
If 0 or FALSE, then minimal outputs; if <code>1</code> or TRUE, more outputs; <code>2</code> even more.
NOTE: in <code>Require</code> function, when <code>verbose &gt;= 2</code>, the return object will have an attribute:
<code>attr(.., "Require")</code> which has lots of information about the processes of the installs.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>A file is written with the package names and versions of all packages within <code>libPaths</code>.
This can later be passed to <code>Require</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="checkPath.html">checkPath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"example_pkgSnapshot"</span><span class="op">)</span>, create <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">pkgSnapFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>tmpdir <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">pkgSnapshot</span><span class="op">(</span><span class="va">pkgSnapFile</span>, <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> package version file saved in /tmp/RtmpN5zsfR/example_pkgSnapshot/file611a26d5867b</span>
<span class="r-in"><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">pkgSnapFile</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Package                                  LibPath Version GithubRepo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: Require /tmp/RtmptiG7lI/temp_libpath60a1631f910c   0.1.4         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    GithubUsername GithubRef GithubSHA1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:             NA        NA         NA</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># An example to move this file to a new computer</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org" class="external-link">Require</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="setLibPaths.html">setLibPaths</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>  <span class="co"># this will only do a snapshot of the main user library</span></span>
<span class="r-in"><span class="va">fileName</span> <span class="op">&lt;-</span> <span class="st">"packageSnapshot.txt"</span></span>
<span class="r-in"><span class="fu">pkgSnapshot</span><span class="op">(</span><span class="va">fileName</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Get file on another computer -- via email, slack, cloud, etc.</span></span>
<span class="r-in"><span class="co"># library(googledrive)</span></span>
<span class="r-in"><span class="co"># (out &lt;- googledrive::drive_upload(fileName)) # copy the file id to clipboard</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># On new machine</span></span>
<span class="r-in"><span class="va">fileName</span> <span class="op">&lt;-</span> <span class="st">"packageSnapshot.txt"</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Require.predictiveecology.org" class="external-link">Require</a></span><span class="op">)</span></span>
<span class="r-in"><span class="co"># get the file from email, slack, cloud etc.</span></span>
<span class="r-in"><span class="co"># library(googledrive)</span></span>
<span class="r-in"><span class="co"># drive_download(as_id(PASTE-THE-FILE-ID-HERE), path = fileName)</span></span>
<span class="r-in"><span class="fu"><a href="setLibPaths.html">setLibPaths</a></span><span class="op">(</span><span class="st">"~/RPackages"</span><span class="op">)</span> <span class="co"># start with an empty folder for new</span></span>
<span class="r-in"><span class="co"># library to minimize package version conflicts</span></span>
<span class="r-in"><span class="fu"><a href="Require.html">Require</a></span><span class="op">(</span>packageVersionFile <span class="op">=</span> <span class="va">fileName</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Passing NULL --&gt; results in output to console with exact Require call to</span></span>
<span class="r-in"><span class="co">#   achieve the packages installations</span></span>
<span class="r-in"><span class="fu">pkgSnapshot</span><span class="op">(</span><span class="cn">NULL</span>, libPaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, exact <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Or shunt it to a file</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="st">"packages2.R"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">pkgSnapshot</span><span class="op">(</span><span class="cn">NULL</span>, libPaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/sink.html" class="external-link">sink</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Will show "minimum package version"</span></span>
<span class="r-in"><span class="fu">pkgSnapshot</span><span class="op">(</span><span class="cn">NULL</span>, libPaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, exact <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># cleanup</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmpdir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

